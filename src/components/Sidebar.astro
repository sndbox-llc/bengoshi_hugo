---
import { getCollection } from 'astro:content'

const allBlogPosts = await getCollection('blog')

// 配列を一度コピーしてからソートする（これが重要！）
const sortedPosts = [...allBlogPosts].sort((a, b) => {
  const dateA = new Date(a.data.date).getTime()
  const dateB = new Date(b.data.date).getTime()

  // 新しい順（降順）なら B - A
  return dateB - dateA
})
---

<a href="tel:0286366701" class="text-decoration-none">
  <div class="p-4 my-5 rounded text-white text-center shadow-sm" style="background: linear-gradient(to bottom, #5a7d3b, #3b5e1e); border-radius: 12px;">
    <div class="mb-2 d-flex justify-content-center align-items-center" style="font-size: 0.9rem;">
      <!-- 新しい電話アイコン（より滑らか） -->
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="white" viewBox="0 0 24 24" class="me-2">
        <path d="M22.94 16.12c-.36-1.03-1.93-1.67-3.08-2.08-1.04-.38-2.25-.08-2.93.65l-1.26 1.28a15.49 15.49 0 0 1-6.84-6.84l1.28-1.26c.73-.68 1.03-1.89.65-2.93-.41-1.15-1.05-2.72-2.08-3.08-.86-.3-2.18-.16-2.98.64L3.2 3.92c-.55.55-.85 1.3-.85 2.07 0 10.38 8.43 18.81 18.81 18.81.77 0 1.52-.3 2.07-.85l1.28-1.28c.8-.8.94-2.12.64-2.98z"></path>
      </svg>
      午前9:00〜午後6:00
    </div>

    <div style="font-size: 1.6rem; font-weight: bold; font-family: 'Hiragino Mincho ProN', serif;">TEL 028-636-6701</div>
  </div>
</a>

<a href="/contact" class="text-decoration-none">
  <div class="p-4 my-5 rounded text-white text-center shadow-sm" style="background: linear-gradient(to bottom, #5a7d3b, #3b5e1e); border-radius: 12px;">
    <div class="mb-2" style="font-size: 1.5rem; font-weight: bold; font-family: 'Hiragino Mincho ProN', serif;">24時間 お問合せ</div>

    <div style="font-size: 0.95rem; display: flex; align-items: center; justify-content: center;">
      <!-- SVGアイコン -->
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="white" viewBox="0 0 16 16" class="me-2">
        <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v.217l-8 4.8-8-4.8V4zm0 1.383v6.634l5.803-3.48L0 5.383zM6.761 9.197l-6.61 3.964A2 2 0 0 0 2 14h12a2 2 0 0 0 1.849-1.197l-6.61-3.964L8 10.417l-1.239-.74zM10.197 8.537 16 12.017V5.383l-5.803 3.154z"></path>
      </svg>
      <span>メールフォーム</span>
    </div>
  </div>
</a>

<section class="">
  <h3 class="text-secondary text-center my-5">インフォメーション</h3>
</section>

<div class="list-group mb-4">
  {
    sortedPosts.slice(0, 5).map((post) => (
      <a href={`/${post.slug}`} class="list-group-item list-group-item-action">
        <p class="small">{post.data.date.toLocaleDateString('ja-JP')}</small>
          
        <div class="d-flex w-100 justify-content-between">
          <h5 class="mb-1 text-brown">{post.data.title.substr(0, 10)}</h5>
        </div>
        <p class="mb-1 text-muted">{post.data.description}</p>
      </a>
      <hr />
    ))
  }
</div>
